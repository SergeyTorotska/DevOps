В этом задании создал веб-приложение (Приложение имитирует гостиничную систему бронирования ) которое можно горизонтально скалировать.


Вручную создал план службы приложений и веб-приложение

Подробно о созданиии приложения:

1.Открыл Cloud Shell на портале Azure (в верхнем правом углу, похоже на квадрат с символами >_ внутри). Выполнил следующую команду, чтобы скачать исходный код для гостиничной системы бронирования:

git clone https://github.com/MicrosoftDocs/mslearn-hotel-reservation-system.git


2.Перешел к папке mslearn-hotel-reservation-system/src:

cd mslearn-hotel-reservation-system/src

3.Выполнил сборку приложения для гостиничной системы, клиентское приложение для нагрузочного тестирования веб-приложения.

dotnet build

4. Подготовил веб-приложение HotelReservationSystem для публикации: 

cd HotelReservationSystem
dotnet publish -o website

5. Перешел к папке website, которая содержит опубликованные файлы. Сжал файлы в ZIP-папку и развернул их в веб-приложении, созданном в предыдущей задаче. Заменил <your-webapp-name> именем своего веб-приложения.

cd website
zip website.zip *
az webapp deployment source config-zip --src website.zip --name WebAppScaleOut  --resource-group mslearn-scale

6. Изменил содержимое файла App.config в этой папке с помощью редактора кода:

cd ~/mslearn-hotel-reservation-system/src/HotelReservationSystemTestClient

code App.config

Раскомментировал строку с элементом ReservationsServiceURI, заменив его значение на URL-адрес веб-приложения


7. Повторно выполнил сборку и запуск приложения:

dotnet build

dotnet run

Запуск клиентского приложения. (Когда клиенты начнут запускаться, делать бронирования и выполнять запросы, вы увидите ряд сообщений. Дайте системе поработать пару минут. Отклик начнет замедляться, и скоро запросы клиентов станут завершаться ошибкой HTTP 408 (превышено время ожидания))

![изображение](https://user-images.githubusercontent.com/73390744/118304268-22440a80-b4ef-11eb-8cb6-9153ae7e9e26.png)

8. Когда запросы стали завершаться ошибкой возникла необходимость горизонталього увеличения масштабирования приложения, для повышения производительности. Но так как я использовал самый базовый план службы приложения F1 free, возникла необходимость и в вертикальном масштабировании плана приложения(изменил план на S1, который позволяет увеличить кол-во экземпляров до 10, и имеет низкую цену относительно других планов, имеющих параметр автомасштабирования)

Увеличил кол-во экземпляров до 5:

![Снимок экрана от 2021-05-13 20-24-42](https://user-images.githubusercontent.com/73390744/118305542-c9757180-b4f0-11eb-866d-f5d4d1af7415.png)

Для большей наглядности создал метрики включающие CPU time, Ошибки HTTP 4.xx, Среднее время отклика:
(Серой линий отделил графики, где левая часть до горизонтально скалирования, правая часть -после увеличения кол-ва экземпляров до 5)

Вы увидите, что время ЦП значительно увеличилось, так как теперь у вас в пять раз больше ресурсов ЦП. Среднее время отклика должно сократиться, как и количество ошибок HTTP 4xx. 

![Снимок экрана от 2021-05-13 20-38-06](https://user-images.githubusercontent.com/73390744/118305741-0fcad080-b4f1-11eb-825e-54c02ba7ac81.png)

![Снимок экрана от 2021-05-13 20-37-57](https://user-images.githubusercontent.com/73390744/118305801-27a25480-b4f1-11eb-8f86-a8b5c253852a.png)



